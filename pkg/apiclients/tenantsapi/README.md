# CLI API Client

This CLI client is based off of the OpenAPI specification for the [tenants-service](https://https://github.com/snyk/tenants-service).

## Intent

This Go client provides API-level interactions with the Tenants Service.

## Directory Contents

This directory contains the following files that enable the above intent:

- `oapi.config.yaml`: Configuration file for the `oapi-codegen` utility; defines the resulting package name, output file name, and which components to generate (models and client).
- `gen.go`: defines the `go:generate` step to create the API client.
- `oapi.gen.go`: Generated Go API client and models for the tenants Service.
- `unified-tenants-spec\`: files generated by /scripts/pull-down-tenants-api-spec.sh:
    - `spec.yaml`: OpenAPI specification for the most recent version of the tenants API.
    - `generated.txt`: contains the fetched YAML's SHA and timestamp.

## Usage

- Run `./scripts/pull-down-tenant-api-spec.sh` to fetch the latest tenants OpenAPI spec into <repo>/pkg/apiclients/tenantsapi/<version>/spec.yaml.
    - Note: read access to the internal tenants API repo is required.
- `cd <repo>/pkg/apiclients/tenantsapi/`
- Run `go generate` to create the `tenantsapi.gen.go` API functions.
